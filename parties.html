<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pardhu ERP – Parties</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
.header{background:#25d366;color:#fff;padding:15px;text-align:center}
.container{padding:15px}
.party{
  background:#fff;
  padding:12px;
  margin-bottom:10px;
  border-radius:10px
}
.badge{
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  color:#fff
}
.active{background:#4caf50}
.inactive{background:#f44336}
button{
  border:none;
  padding:10px;
  border-radius:6px;
  color:#fff;
  cursor:pointer
}
</style>
</head>

<body>

<script>
/* ===== AUTH + RBAC ===== */
const role = localStorage.getItem("role");
const modules = (localStorage.getItem("modules") || "").toLowerCase();

if(!role){
  location.replace("index.html");
}

if(modules !== "all" && !modules.includes("parties")){
  alert("Access denied");
  location.replace("dashboard.html");
}
</script>

<div class="header">Parties</div>

<div class="container">

  <!-- ADD PARTY (ADMIN / SUPER ONLY) -->
  <script>
    if(role === "admin" || role === "super"){
      document.write(`
        <button style="background:#2196f3;width:100%"
          onclick="location.href='party-create.html'">
          ➕ Add Party
        </button><br><br>
      `);
    }
  </script>

  <div id="partyList">Loading...</div>
</div>

<script src="parties.js"></script>
</body>
</html>
